<!DOCTYPE html>
<html>
  <head>
    <title>Ucheson & Sons | Nigerian Building Materials</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <!-- Custom SCSS -->
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body class="flex flex-col min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center py-4">

          <!-- Logo -->
          <%= link_to root_path, class: "flex items-center space-x-3 hover:opacity-80 transition-opacity" do %>
            <div class="w-10 h-10 bg-primary-600 rounded-lg flex items-center justify-center">
              <span class="text-xl font-bold text-white">U</span>
            </div>
            <div>
              <div class="text-lg font-bold text-gray-900">Ucheson & Sons</div>
              <div class="text-xs text-gray-600 italic">"God is Able"</div>
            </div>
          <% end %>

          <!-- Navigation -->
          <nav class="hidden md:flex items-center space-x-6">
            <%= link_to "Home", root_path, class: "text-gray-700 hover:text-primary-600 font-medium transition-colors" %>

            <%= link_to cart_path, class: "relative text-gray-700 hover:text-primary-600 font-medium transition-colors" do %>
              Cart
              <% if cart_item_count > 0 %>
                <span class="absolute -top-2 -right-2 w-5 h-5 bg-red-600 text-white text-xs font-bold rounded-full flex items-center justify-center">
                  <%= cart_item_count %>
                </span>
              <% end %>
            <% end %>

            <% if user_signed_in? %>
              <%= link_to "My Account", account_root_path, class: "text-gray-700 hover:text-primary-600 font-medium transition-colors" %>
              <%= link_to "Logout", destroy_user_session_path, data: { turbo_method: :delete }, class: "text-gray-700 hover:text-red-600 font-medium transition-colors" %>
            <% else %>
              <%= link_to "Login", new_user_session_path, class: "text-gray-700 hover:text-primary-600 font-medium transition-colors" %>
              <%= link_to "Sign Up", new_user_registration_path, class: "btn-primary text-sm px-4 py-2" %>
            <% end %>

            <%= link_to "Admin", admin_root_path, class: "px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors" %>
          </nav>
        </div>
      </div>

      <!-- Category Bar -->
      <div class="border-t border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="flex overflow-x-auto py-3 space-x-3 scrollbar-hide">
            <%= link_to "All Products", products_path,
                class: "whitespace-nowrap px-4 py-2 rounded-lg font-medium transition-colors #{params[:category_id].blank? ? 'bg-primary-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}" %>

            <% Category.all.each do |category| %>
              <%= link_to category.name, category_products_path(category_id: category.id),
                  class: "whitespace-nowrap px-4 py-2 rounded-lg font-medium transition-colors #{params[:category_id].to_i == category.id ? 'bg-primary-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}" %>
            <% end %>
          </div>
        </div>
      </div>
    </header>

    <!-- Flash Messages -->
    <% if notice.present? || alert.present? %>
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4">
        <% if notice %>
          <div class="bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg flex items-center">
            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            <%= notice %>
          </div>
        <% end %>

        <% if alert %>
          <div class="bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg flex items-center">
            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
            </svg>
            <%= alert %>
          </div>
        <% end %>
      </div>
    <% end %>

    <!-- Main Content -->
    <main class="flex-grow">
      <%= yield %>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-300 mt-16">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">

          <!-- Company Info -->
          <div>
            <div class="flex items-center space-x-2 mb-4">
              <div class="w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center">
                <span class="text-lg font-bold text-white">U</span>
              </div>
              <span class="text-lg font-bold text-white">Ucheson & Sons</span>
            </div>
            <p class="text-gray-400 text-sm">
              Nigeria's trusted supplier of quality building materials.
            </p>
          </div>

          <!-- Quick Links -->
          <div>
            <h3 class="text-white font-semibold mb-4">Quick Links</h3>
            <ul class="space-y-2 text-sm">
              <li><%= link_to "Home", root_path, class: "hover:text-primary-400 transition-colors" %></li>
              <li><%= link_to "Products", products_path, class: "hover:text-primary-400 transition-colors" %></li>
              <li><%= link_to "Cart", cart_path, class: "hover:text-primary-400 transition-colors" %></li>
              <% if user_signed_in? %>
                <li><%= link_to "My Account", account_root_path, class: "hover:text-primary-400 transition-colors" %></li>
              <% end %>
            </ul>
          </div>

          <!-- Contact -->
          <div>
            <h3 class="text-white font-semibold mb-4">Contact</h3>
            <ul class="space-y-2 text-sm">
              <li>Edo, Nigeria</li>
              <li>info@uchesonandson.com</li>
              <li>+234 760 700 870</li>
            </ul>
          </div>
        </div>

        <div class="border-t border-gray-800 mt-8 pt-8 text-center">
          <div class="text-primary-400 font-semibold text-lg mb-2">
            "God is Able"
          </div>
          <div class="text-sm text-gray-500">
            Â© <%= Time.current.year %> Ucheson & Sons Nig LTD. All rights reserved.
          </div>
        </div>
      </div>
    </footer>
    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>